<section
  class="border-r border-gray-200 flex flex-col h-full overflow-hidden"
  [class.w-48]="emails().length"
  [class.invisible]="!emails().length"
>
  @if (emails().length) {
  <ul class="flex-1 overflow-y-auto min-h-0 email-scrollbar">
    @for (email of emails(); track email.id) {
    <li
      (click)="selectEmail(email)"
      [class.bg-blue-50]="isSelected(email.id)"
      class="border-b border-gray-100 cursor-pointer px-4 py-2 hover:bg-blue-50"
    >
      <div class="truncate text-xs text-gray-500 flex gap-1">
        <span class="truncate flex-1">{{ email.from_email }}</span>

        <!-- TODO: use the sent time -->
        <span class="flex-none">{{ email.updated_at | timeAgo:{ thresholdDays: 7, style: 'short' } }}</span>
      </div>
      <div class="truncate font-medium flex gap-1">
        <span class="truncate flex-1">{{ email.subject }}</span>

        @if (email.has_attachment) {
        <pc-icon class="flex-none" name="paper-clip" [size]="4"></pc-icon>
        }
      </div>
      <div class="truncate font-light text-xs text-gray-500">{{ email.preview }}</div>
    </li>
    }
  </ul>
  }
</section>
