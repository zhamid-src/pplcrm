<div class="flex h-[80vh] text-sm bg-white">
    <!-- Folder list -->
    <aside class="bg-gray-50 border-r border-gray-200 group flex flex-col transition-all duration-50 hover:w-36"
        [class.w-36]="!foldersCollapsed()" [class.w-16]="foldersCollapsed()">
        <h2 class="px-4 py-2 text-xs font-semibold text-gray-600">
            <span class="group-hover:md:block" [class.hidden]="foldersCollapsed()">Folders</span>
            <span class="block text-center group-hover:md:hidden" [class.hidden]="!foldersCollapsed()">F</span>
        </h2>
        <ul class="flex-1">
            <li *ngFor="let folder of folders()" (click)="selectFolder(folder)"
                [ngClass]="{ 'bg-blue-100 text-blue-600': selectedFolder()?.id === folder.id }"
                class="cursor-pointer flex items-center px-4 py-2 hover:bg-blue-50">
                <span class="group-hover:md:block" [class.hidden]="foldersCollapsed()">{{ folder.name }}</span>
                <span class="group-hover:md:hidden w-full text-center" [class.hidden]="!foldersCollapsed()">
                    {{ folder.name[0] }}
                </span>
            </li>
        </ul>
        <div class="border-t border-gray-200 p-2 flex justify-center">
            <pc-swap swapOffIcon="bars-3" swapOnIcon="x-mark" animation="rotate" [checked]="!foldersCollapsed()"
                (clickEvent)="toggleFolders()"></pc-swap>
        </div>
    </aside>

    <!-- Email list -->
    <section class="w-80 border-r border-gray-200">
        <h2 class="px-4 py-2 text-xs font-semibold text-gray-600">Emails</h2>
        <ul>
            <li *ngFor="let email of emails()" (click)="selectEmail(email)"
                [ngClass]="{ 'bg-blue-50': selectedEmail()?.id === email.id }"
                class="border-b border-gray-100 cursor-pointer px-4 py-2 hover:bg-blue-50">
                <div class="truncate font-medium">{{ email.subject }}</div>
                <div class="truncate text-xs text-gray-500">{{ email.body }}</div>
            </li>
        </ul>
    </section>

    <!-- Email details -->
    <section class="flex-1 flex flex-col">
        <ng-container *ngIf="selectedEmail(); else empty">
            <header class="border-b border-gray-200 p-4">
                <h3 class="text-lg font-semibold">{{ selectedEmail().subject }}</h3>
                <p class="text-xs text-gray-500" *ngIf="selectedEmail().assigned_to">
                    Assigned to {{ selectedEmail().assigned_to }}
                </p>
            </header>
            <main class="flex-1 overflow-auto p-4 space-y-4">
                <p>{{ selectedEmail().body }}</p>

                <div>
                    <h4 class="mb-2 font-semibold">Comments</h4>
                    <div *ngFor="let comment of comments()" class="mb-2 rounded bg-gray-100 p-2">
                        {{ comment.comment }}
                    </div>
                    <textarea [(ngModel)]="newComment" placeholder="Add a comment"
                        class="w-full rounded border p-2"></textarea>
                    <button (click)="addComment()" class="mt-2 rounded bg-blue-600 px-3 py-1 text-white">Add
                        Comment</button>
                </div>

                <div class="mt-4">
                    <h4 class="mb-2 font-semibold">Assign</h4>
                    <div class="flex items-center gap-2">
                        <input [(ngModel)]="assignTo" placeholder="Assign to user id"
                            class="flex-1 rounded border p-2" />
                        <button (click)="assign()" class="rounded bg-green-600 px-3 py-1 text-white">Assign</button>
                    </div>
                </div>
            </main>
        </ng-container>
        <ng-template #empty>
            <div class="flex flex-1 items-center justify-center text-gray-400">Select an email to view its content</div>
        </ng-template>
    </section>
</div>