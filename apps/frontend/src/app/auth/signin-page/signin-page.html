<!-- Template for user sign-in with email and password form. -->
<pc-auth-layout>
  <label class="label text-base text-neutral-600">Enter your email and password to sign in</label>
  <form [formGroup]="form">
    <div class="space-y-3">
      <label class="relative block">
        <pc-icon
          [size]="4"
          class="focus-within:text-primary pointer-events-none absolute left-3 top-1/3 h-1 w-4 -translate-y-1/2 transform pt-0.5 text-sm text-gray-300"
          name="at-symbol"
        />

        <input
          type="email"
          placeholder="Enter your email"
          formControlName="email"
          aria-placeholder="email"
          class="input-pplcrm pl-11 text-sm"
          autocomplete="email"
        />
      </label>

      @if (email.dirty && email.invalid) {
      <span class="label-text-alt text-error">Please enter a valid email</span>
      }

      <pc-password-input
        [control]="password"
        autocomplete="current-password"
        placeholder="Enter your password"
      ></pc-password-input>

      <div class="flex items-center justify-between pt-2">
        <div class="flex items-center">
          <input
            id="remember_me"
            name="remember_me"
            type="checkbox"
            class="checkbox checkbox-primary checkbox-sm"
            [checked]="persistence"
            (change)="togglePersistence($event.target)"
          />
          <label for="remember_me" class="ml-2 block text-sm text-neutral-600"> Remember me </label>
        </div>
        <div class="text-sm">
          <a routerLink="/resetpassword" class="link link-hover text-neutral-600"> Forgot your password? </a>
        </div>
      </div>
      <div>
        <button
          type="submit"
          class="btn btn-primary w-full"
          (click)="signIn()"
          [disabled]="isLoading() || (form.dirty && form.invalid)"
        >
          @if (isLoading()) {
          <span class="loading loading-dots loading-lg text-primary"></span>
          } @else { SIGN IN }
        </button>
      </div>
    </div>
  </form>
  <div class="py-3 text-center">
    <a routerLink="/signup" class="link link-hover text-neutral-600">SIGN UP</a>
  </div>
  <div class="text-center text-xs text-neutral-500">
    <span>
      Copyright Â© 2024
      <a href="" rel="" target="_blank" title="CampaignRaven" class="link link-hover">CampaignRaven</a></span
    >
  </div>
</pc-auth-layout>
