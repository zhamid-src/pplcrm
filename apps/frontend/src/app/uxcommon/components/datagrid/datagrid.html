<div class="flex h-full w-full flex-col">
  <ul class="menu menu-horizontal flex flex-row pt-0">
    <pc-grid-action [enabled]="!!addRoute()" [tip]="'Add'" [icon]="plusIcon()" (action)="add()" />
    <pc-grid-action [enabled]="!disableRefresh()" [tip]="'Refresh the grid'" icon="arrow-path" (action)="refresh()" />
    <pc-grid-action [enabled]="!!undoMgr.canUndo()" tip="Undo" icon="arrow-uturn-left" (action)="undoMgr.undo()" />
    <pc-grid-action [enabled]="!!undoMgr.canRedo()" tip="Redo" icon="arrow-uturn-right" (action)="undoMgr.redo()" />
    <pc-grid-action
      [enabled]="!disableImport()"
      [tip]="'Import data from CSV'"
      icon="cloud-arrow-up"
      (action)="doImportCSV()"
    />
    <pc-grid-action
      [enabled]="!disableExport()"
      [tip]="'Download as CSV'"
      icon="arrow-down-tray"
      (action)="confirmExport()"
    />
    <pc-grid-action
      [enabled]="!disableDelete() && isRowSelected()"
      [tip]="'Deleted selected row(s)'"
      icon="trash"
      (action)="confirmDelete()"
    />
    <pc-grid-action icon="funnel" tip="Filter the grid" (action)="filter()" />
    <li class="grow">
      <a class="hover:text-primary ml-auto">
        <pc-icon name="information-circle"></pc-icon>
      </a>
    </li>
  </ul>

  @if (isLoading()) {
  <progress class="progress h-1"></progress>
  } @if (gridVisible()) {
  <ag-grid-angular
    class="flex-1 font-light"
    [theme]="getTheme()"
    [columnDefs]="colDefsWithEdit"
    (gridReady)="onGridReady($event)"
    [gridOptions]="mergedGridOptions"
    [getRowId]="getRowId"
    [cellSelection]="true"
    [enableCellTextSelection]="true"
  >
  </ag-grid-angular>
  }
</div>
